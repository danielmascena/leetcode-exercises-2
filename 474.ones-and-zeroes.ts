import { expect } from "bun:test";
/*
 * @lc app=leetcode id=474 lang=typescript
 *
 * [474] Ones and Zeroes
 */

// @lc code=start
function findMaxForm(strs: string[], m: number, n: number): number {
  const len = strs.length;
  const { max } = Math;
  const is0gt = m > n;
  const arr = strs
    .map((a) => {
      const len = a.length;
      const o = a.replaceAll("0", "").length;
      return [len - o, o];
    })
    .toSorted(([a, b], [c, d]) => (is0gt ? b - d : a - c));
  let z0s = 0;
  let o1s = 0;
  let ans = 0;
  console.log(arr);

  for (let lt = 0, rt = 0, qt = 0; lt < len; rt = ++lt, z0s = o1s = qt = 0) {
    while (rt < len) {
      const [z, o] = arr[rt++];

      if (z0s + z > m || o1s + o > n) {
        continue;
      }
      z0s += z;
      o1s += o;
      qt++;
    }
    ans = max(ans, qt);
  }
  return ans;
}
// @lc code=end

expect(findMaxForm(["10", "0001", "111001", "1", "0"], 5, 4)).toBe(4);
expect(findMaxForm(["10", "0", "1"], 1, 1)).toBe(2);
expect(findMaxForm(["111", "1000", "1000", "1000"], 9, 3)).toBe(3);
expect(
  findMaxForm(
    [
      "0",
      "11",
      "1000",
      "01",
      "0",
      "101",
      "1",
      "1",
      "1",
      "0",
      "0",
      "0",
      "0",
      "1",
      "0",
      "0110101",
      "0",
      "11",
      "01",
      "00",
      "01111",
      "0011",
      "1",
      "1000",
      "0",
      "11101",
      "1",
      "0",
      "10",
      "0111",
    ],
    9,
    80
  )
).toBe(17);
expect(findMaxForm(["0001", "0101", "1000", "1000"], 9, 3)).toBe(3);
expect(
  findMaxForm(
    [
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
      "11",
      "01",
    ],
    50,
    50
  )
).toBe(50);
expect(findMaxForm(["10", "0001", "111001", "1", "0"], 50, 50)).toBe(5);
expect(findMaxForm(["011111", "001", "001"], 4, 5)).toBe(2);
expect(findMaxForm(["11111", "100", "1101", "1101", "11000"], 5, 7)).toBe(3);
expect(
  findMaxForm(
    [
      "0000111",
      "0000111111",
      "01111111",
      "0001",
      "000111111",
      "0000001111111",
      "00011111",
      "000011111",
      "00000011",
      "0111111",
      "0000000001111111",
      "0011",
      "001111",
      "00000001111",
      "0011",
      "0000111111111",
      "0001111111",
      "011111111",
    ],
    4,
    6
  )
).toBe(2);
expect(
  findMaxForm(
    [
      "10010",
      "10111011",
      "001",
      "110000",
      "101111",
      "1011001001",
      "0111",
      "1",
      "11101001",
      "01110",
      "0000101",
      "110110010",
      "0101",
      "010111100",
      "011000",
      "00100101",
      "0011",
      "00",
      "10011000",
      "00010",
      "010011011",
      "1011",
      "010011010",
      "11110",
      "1",
      "11010",
      "00010000",
      "0101",
      "111010",
      "1100011",
      "001000",
      "11",
      "10011",
      "1111110001",
      "100",
      "1010101111",
      "010",
      "10000",
      "01",
    ],
    10,
    8
  )
).toBe(8);
expect(
  findMaxForm(["0", "1", "00111111", "00000011", "000111", "000111"], 7, 7)
).toBe(4);
expect(
  findMaxForm(
    [
      "010",
      "1010",
      "001",
      "100",
      "0101",
      "101",
      "1100",
      "0011",
      "000",
      "001",
      "010",
      "011",
      "110",
      "111",
      "10101",
      "10110",
      "01110",
      "10011",
      "11111",
      "00",
      "01",
      "10",
      "11",
      "0",
      "1",
      "1000",
      "1001",
      "1011",
    ],
    25,
    35
  )
).toBe(20);
expect(
  findMaxForm(
    [
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
      "1",
      "0",
    ],
    30,
    30
  )
).toBe(60);
expect(
  findMaxForm(
    [
      "101000000",
      "1100001010",
      "11101000",
      "011010110",
      "0010001",
      "0011",
      "0111101111",
    ],
    10,
    11
  )
).toBe(3);
